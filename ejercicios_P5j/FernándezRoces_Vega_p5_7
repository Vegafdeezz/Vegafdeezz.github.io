<!doctype html>
<html lang="en">
    <head>
        <meta charset="UTF-8" />
        <title>A1 — Variables (estado + movimiento simple)P5_3bis</title>
        <script src="https://cdnjs.cloudflare.com/ajax/libs/p5.js/1.9.0/p5.min.js"></script>
    </head>

    <body>
        <script>
            //Variables del sol(s) y variables de la luna(l)
            let x_s, y_s, v_s, d_s, r_s;
            let x_l, y_l, v_l, d_l, r_l;

            // Variables del Globo
            let xG, yG, vyG, Sg, cuerda;

            // Variables del Árbol
            let S, troncoW, troncoH, copaD;

            // Variables del Coche
            let xC, vxC, L, H, wheelD;

            function setup() {
                createCanvas(800, 600);
                
            //LUNA Y SOL
                // Tamaño del sol y de la luna relativo al lienzo
                d_s = width * 0.1; // 15% del lado menor min(width, height) * 0.15;
                d_l = d_s;

                r_s = d_s / 2;
                r_l = d_l / 2;

                // Posición inicial del sol
                x_s = -r_s;
                y_s = height * 0.15; // altura relativa (15% del alto)

                // Posición inicial de la luna
                x_l = -width - r_s;
                y_l = height * 0.15;

                // Velocidad del sol
                v_s = width / 450; //ajustar este valor si va muy rápido/lento

                // Velocidad relativa de la luna al ancho
                v_l = v_s;

            //Árbol
                // Tamaño base del árbol
                S = height * 0.1;
                // Ancho del tronco
                troncoW = S * 0.3;
                // Alto del tronco
                troncoH = S * 1.2;
                // Diámetro de la copa
                copaD = S * 1.1;

            //Coche
                // Longitud del coche
                L = height * 0.23; 
                // Altura del coche
                H = L * 0.40; 
                // Diámetro de las ruedas
                wheelD = L * 0.25; 
                // Posición inicial en X
                xC = -L; 
                // Velocidad horizontal del coche
                vxC = 5; 
                
            //GLOBO
                // Tamaño relativo del globo
                Sg = height * 0.08;
                // Posición inicial del Globo
                xG = width * 0.7; // Posición X del globo
                yG = height * 0.9; // Posición Y del globo
                // Velocidad vertical del globo
                vyG = -0.7;
                // Longitud de la cuerda
                cuerda = Sg * 1.5;
            }

            function draw() {
                background(122, 195, 255);

                // Arcoíris
                noFill();
                strokeWeight(20);
                stroke(255, 0, 0); // rojo
                arc(400, 500, 700, 700, PI, TWO_PI);
                stroke(255, 127, 0); // naranja
                arc(400, 500, 660, 660, PI, TWO_PI);
                stroke(255, 255, 0); // amarillo
                arc(400, 500, 620, 620, PI, TWO_PI);
                stroke(0, 255, 0); // verde
                arc(400, 500, 580, 580, PI, TWO_PI);
                stroke(0, 0, 255); // azul
                arc(400, 500, 540, 540, PI, TWO_PI);
                stroke(75, 0, 130); // índigo
                arc(400, 500, 500, 500, PI, TWO_PI);

                // Casa
                strokeWeight(1);
                stroke(0);
                fill(227, 242, 220);
                rect(200, 300, 200, 200); // cuerpo de la casa
                fill(163, 29, 0);
                triangle(200, 300, 400, 300, 300, 200); // techo

                // Puerta
                fill(100, 50, 0);
                rect(270, 400, 60, 100);

                // Ventanas
                fill(135, 206, 250);
                rect(230, 330, 40, 40);
                rect(330, 330, 40, 40);

                // Césped
                stroke(0, 184, 52);
                fill(0, 184, 52);
                rect(0, height * 0.8, width, height * 0.2);

                // --- 4) Sol (usa variables en lugar de números fijos) ---
                fill(255, 210, 0);
                circle(x_s, y_s, d_s);
                // --- 4) Luna (usa variables en lugar de números fijos) ---
                fill(128, 128, 128);
                circle(x_l, y_l, d_l);
 
                // --- 5) ACTUALIZACIÓN del estado (la animación) ---
                // Cada frame, avanzamos x en v pixeles:
                x_s = x_s + v_s;
                x_l = x_l + v_l

                // --- Árbol creciendo lentamente ---
                S = S + 0.0008 * height; // Crecimiento lento
                troncoW = S * 0.3;
                troncoH = S * 1.2;
                copaD = S * 1;
                fill(139, 69, 19); // Tronco
                rect(0.15 * width - 0.5 * troncoW , 0.8 * height - troncoH, troncoW, troncoH);
                fill(34, 139, 34); // Copa
                circle(0.15 * width, 0.8 * height - troncoH - 0.3 * S, copaD);

                // --- Coche avanzando ---
                fill(0, 0, 200); 
                rect(xC - 0.5 * L, 0.75 * height - 0.6 * H, L, H); 
                fill(40); 
                circle(xC - 0.35 * L, 0.73 * height + 0.6 * H, wheelD); 
                circle(xC + 0.35 * L, 0.73 * height + 0.6 * H, wheelD); 
                xC = xC + vxC;
                
                // --- Globo subiendo ---
                fill(255, 80, 80);
                circle(xG, yG, Sg);
                stroke(60);
                line(xG, yG + 0.5 * Sg, xG, yG + 0.5 * Sg + cuerda); // Cuerda
                yG = yG + vyG; // El globo sube

                // --- Rotulitos informativos ---
                fill(255);
                textSize(16);
                textAlign(LEFT, TOP);
                text("A1 — Variables (estado + movimiento simple)", 10, 10);

                textSize(12);
                text("x_s = " + nf(x_s, 1, 1) + "  |  v_s = " + nf(v_s, 1, 2), 10, 32);
                text("x_l = " + nf(x_l, 1, 1) + "  |  v_l = " + nf(v_l, 1, 2), 10, 48);
                text("xG = " + nf(xG, 1, 1) + "  |  vyG = " + nf(vyG, 1, 2), 10, 64);
                text("S = " + nf(S, 1, 1), 10, 80);
                text("xC = " + nf(xC, 1, 1) + "  |  vxC = " + nf(vxC, 1, 2), 10, 96);
            }
        </script>
    </body>
</html>
